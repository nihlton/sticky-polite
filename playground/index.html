<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sticky Polite Playground</title>
    <link href="./playground.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header id="main-header" class="sticky-polite">
      <h1>sticky polite</h1>
      <nav>
        <ol>
          <li><a href="#usage">usage</a></li>
          <li><a href="#examples">examples</a></li>
          <li><a href="https://github.com/nihlton/sticky-polite">gitHub</a></li>
        </ol>
      </nav>
    </header>
    <div class="content">
      <p><em>Scroll down, then up to observe the behavior.</em></p>

      <p>
        A compact, robust, zero-dependency headless utility for 'polite' sticky positioning. Imagine if <code>position: sticky</code> could understand
        when your user wants it out of the way and politely excuses itself from the viewport.
      </p>
      <p>Keep important page elements highly available, while keeping the screen clear of distractions.</p>
      <p><a href="https://github.com/nihlton/sticky-polite">github repo</a></p>
      <p><strong>Key Features:</strong></p>
      <ul>
        <li>
          <strong>nearly-zero setup:</strong> Apply the class name <code>sticky-polite</code> and an edge offset to an element, and you are done.
        </li>
        <li>
          <strong>compatible with React/Vue/Svelte:</strong>
          Performance-optimized observers manage
          <code>sticky-polite</code> element lifecycles.
        </li>
        <li><strong>axis and direction agnostic:</strong> Elements can stick to the top, bottom, left or right.</li>
        <li>
          <strong>no animations/transitions:</strong> Interactions feel buttery and smooth, like native browser behavior - because most of it is!
        </li>
      </ul>
      <p><strong>Limitations:</strong></p>
      <ul>
        <li>
          <strong>Mobile footer:</strong> Mobile browsers manipulate the viewport size when scrolling in a ways that are difficult to predict/adapt
          to. Footers whose scrolling-parent are the body/document cannot always transition smoothly between 'hidden' and 'visible'. So it goes.
        </li>
        <li>
          <strong>Single edge:</strong> While <code>position: sticky</code> supports all four edges simultaneously,
          <code>sticky-polite</code> supports one. This feels like the appropriate balance between package size/complexity and core-use coverage.
        </li>
      </ul>
      <h2>Installation</h2>
      <pre><code class="language-bash">npm install sticky-polite
</code></pre>
      <h2 id="usage">Usage</h2>
      <p>Import the package.</p>
      <pre><code class="language-javascript">import "sticky-polite";</code></pre>
      <p>or</p>
      <pre><code class="language-html">&lt;script src="https://unpkg.com/sticky-polite/dist/index.cjs"&gt;&lt;/script&gt;
</code></pre>
      <p>Add the class and an edge offset to an element:</p>
      <pre><code class="language-html">// inline edge offset
&lt;header class="sticky-polite" style="top: 1rem"&gt;Header&lt;/header&gt;

- or -

// via stylesheet
&lt;style&gt;
  header.sticky-polite { top: 20px }
&lt;/style&gt;
</code></pre>
      <p><strong>Important Notes:</strong></p>
      <ul>
        <li>
          <strong>defined edge</strong>: <code>sticky-polite</code> elements must have one edge offset defined. Elements with more than one, or less
          than one edge will be ignored.
        </li>
        <li>
          <strong>nested containers</strong>: elements with an edge offset greater than zero, which are nested within a scrolling container may never
          be able to return to their static/natural position. This reflects the browser's native <code>'position: sticky'</code> behavior, but is
          something to be aware of. You may find it useful to set the edge to '0px' and apply a padding value to the parent instead.
        </li>
      </ul>
      <h2>Advanced Usage</h2>
      <p>You can optionally style the element based on the state it's in.</p>
      <ul>
        <li><code>static</code> - The default state, where the element is resting in it's natural position</li>
        <li>
          <code>intersect</code> - The element was off-screen, and you have begun scrolling towards it. It enters this state as it begins to reveal
          itself
        </li>
        <li>
          <code>sticky</code> - The element is stuck to the view port edge (e.g. The element is fully revealed, and you are scrolling toward its
          natural position)
        </li>
      </ul>
      <pre><code class="language-css">.sticky-polite[data-polite-state="static"] {
  outline: none;
}

.sticky-polite[data-polite-state="intersect"] {
  outline: 3px solid green;
}

.sticky-polite[data-polite-state="sticky"] {
  outline: 3px solid blue;
}
</code></pre>
      <p><strong>Important Notes:</strong></p>
      <ul>
        <li>
          <strong>foot guns</strong>: you can pretty easily shoot yourself in the foot by applying CSS which changes the element's dimensions or
          position. The utility will do what it can to adapt, but apply these state styles with caution, and test extensively.
        </li>
      </ul>

      <h2 id="examples">Examples</h2>
      <div class="nested-test">
        <header class="sticky-polite"><h2>Nested Header</h2></header>
        <p>This header and footer should be constrained to their scrolling parent</p>
        <div class="dummy"></div>
        <footer class="sticky-polite">footer &bull; links &bull; etc</footer>
      </div>
      <div class="nested-test horizontal">
        <ul class="sticky-polite menu-left">
          <li><strong>stick.left</strong></li>
          <li>item 1</li>
          <li>item 2</li>
          <li>item 3</li>
          <li>item 4</li>
          <li>item 5</li>
        </ul>
        <div class="dummy">
          <p>scroll left / right</p>
        </div>
      </div>
      <div class="nested-test horizontal">
        <div class="dummy"><p>scroll left / right</p></div>
        <ul class="sticky-polite menu-right">
          <li><strong>stick.right</strong></li>
          <li>item 1</li>
          <li>item 2</li>
          <li>item 3</li>
          <li>item 4</li>
          <li>item 5</li>
        </ul>
      </div>

      <div class="dummy"></div>
    </div>

    <footer class="sticky-polite">footer &bull; links &bull; etc</footer>

    <script type="module" src="../dist/index.js"></script>
  </body>
</html>
