'use strict';var c={className:"sticky-polite",attrName:"data-polite-state",epsilon:1};var v={top:0,bottom:0,left:0,right:0},J=t=>{if(!t.valid)return {x:0,y:0};let{edge:e,offset:o}=t;switch(e){case "top":return {x:0,y:o};case "bottom":return {x:0,y:-o};case "left":return {x:o,y:0};case "right":return {x:-o,y:0}}},k=()=>{if(document.getElementById("sticky-polite-beacon"))return;let t=document.createElement("style");t.id="sticky-polite-beacon",t.innerHTML=`
    @keyframes sticky-polite-announce { 
      from { opacity: 0.999; } 
      to { opacity: 1; } 
    }
    .${c.className} { 
      animation-duration: 1ms; 
      animation-name: sticky-polite-announce; 
    }
  `,document.head.appendChild(t);},P=t=>{if(t instanceof Window||t===document.documentElement||t===document.body)return v;let e=getComputedStyle(t);return {top:parseInt(e.paddingTop,10)||0,bottom:parseInt(e.paddingBottom,10)||0,left:parseInt(e.paddingLeft,10)||0,right:parseInt(e.paddingRight,10)||0}},y=(t,e,o)=>{let{element:i}=t;i.style.position="relative",i.style.transform=`translate3d(${e}px, ${o}px, 0)`,i.setAttribute(c.attrName,"intersect"),t.currentTranslation=e!==0?e:o;},h=t=>{t.style.position="sticky",t.style.transform="",t.setAttribute(c.attrName,"sticky");},m=t=>{let{element:e,cachedConfig:o}=t,i=J(o);e.style.position="relative",e.style.transform=`translate3d(${-i.x}px, ${-i.y}px, 0)`,e.setAttribute(c.attrName,"static");},V=(t,e)=>{let o=e==="top"||e==="bottom";return t===document.documentElement?window.visualViewport?o?window.visualViewport.height:window.visualViewport.width:o?window.innerHeight:window.innerWidth:o?t.clientHeight:t.clientWidth},H=(t,e)=>{let o=t===document.documentElement;return e==="left"||e==="right"?o?window.scrollX:t.scrollLeft:o?window.scrollY:t.scrollTop},E=t=>{if(!t||t===document.body)return document.documentElement;let o=getComputedStyle(t).overflowY;return o!=="visible"&&o!=="hidden"&&t.scrollHeight>=t.clientHeight?t:E(t.parentElement)},N=(t,e)=>{let o=t.getBoundingClientRect(),i=0,n=0,l=0,r=0,a=0,s=0;if(e===document.documentElement)l=window.scrollY,r=window.scrollX;else {let d=e.getBoundingClientRect();i=d.top,n=d.left,l=e.scrollTop,r=e.scrollLeft,a=e.clientTop||0,s=e.clientLeft||0;}let f=o.top-i+l-a,u=o.left-n+r-s;return {top:f,left:u,width:o.width,height:o.height,bottom:f+o.height,right:u+o.width,x:u,y:f,toJSON:()=>{}}},A=(t,e)=>{if(t===e){let o=e.scrollWidth,i=e.scrollHeight;return {top:0,left:0,width:o,height:i,bottom:i,right:o,x:0,y:0,toJSON:()=>{}}}return N(t,e)},O=(t,e)=>{let o=t.hasAttribute(c.attrName),i=t.style.position,n=t.style.transform,l=t.style.top,r=t.style.left,a=t.style.right,s=t.style.bottom;o&&(t.style.position="relative",t.style.transform="",t.style.top="auto",t.style.left="auto",t.style.right="auto",t.style.bottom="auto");let f=N(t,e);return o&&(t.style.position=i,t.style.transform=n,t.style.top=l,t.style.left=r,t.style.right=a,t.style.bottom=s),f};var z=t=>{let e=t.style.position,o=t.hasAttribute(c.attrName);o&&(t.style.position="");let i=["top","bottom","left","right"],n=null,l=0;if("computedStyleMap"in t)try{let r=t.computedStyleMap();for(let a of i){let s=r.get(a);if(s&&"value"in s&&typeof s.value=="number"){if(n)return o&&(t.style.position=e),{valid:!1,edge:"top",offset:0};n=a,l=s.value;}}}catch{}if(!n){let r=getComputedStyle(t);for(let a of i){let s=r.getPropertyValue(a);if(s&&s!=="auto"&&s!==""){if(n)return o&&(t.style.position=e),{valid:false,edge:"top",offset:0};n=a,l=parseFloat(s)||0;}}}return o&&(t.style.position=e),n?{valid:true,edge:n,offset:l}:{valid:false,edge:"top",offset:0}};var Y=t=>{let {parent:e,lastScrollPos:o,naturalRect:i,cachedConfig:n,cachedViewportSize:l,directParentRect:r,cachedViewportPadding:a}=t,{edge:s,offset:f}=n,u=s==="top"||s==="bottom",d=s==="top"||s==="left",L=H(e,s),B=L-o,W=f+a[s],C=u?i.top:i.left,$=u?i.height:i.width,R=d?f:-f,q=u?r.bottom:r.right,G=u?r.top:r.left;return {isVertical:u,isStartAnchor:d,currentScroll:L,viewportSize:l,scrollDelta:B,offset:W,implicitShift:R,layoutStart:C,dimension:$,constraintStart:G,constraintEnd:q}},j=t=>{let e=t.currentScroll+t.viewportSize;return t.constraintEnd<t.currentScroll||t.constraintStart>e},U=t=>t.isStartAnchor?t.layoutStart>=t.currentScroll+t.offset-c.epsilon:t.layoutStart+t.dimension<=t.currentScroll+t.viewportSize-t.offset+c.epsilon,K=(t,e)=>{if(e.isSticky){let o=0;t.isStartAnchor?o=t.currentScroll+t.offset-t.layoutStart:o=t.currentScroll+t.viewportSize-t.offset-t.dimension-t.layoutStart;let i=o-t.implicitShift;t.isVertical?y(e,0,i):y(e,i,0),e.isSticky=false,e.isTransforming=true;}if(e.isTransforming){let o=t.layoutStart+e.currentTranslation+t.implicitShift,i=false;t.isStartAnchor?i=o+t.dimension<t.currentScroll:i=o>t.currentScroll+t.viewportSize,i&&(m(e),e.isTransforming=false);}},Q=(t,e)=>{let o=false,i=t.layoutStart+t.implicitShift;if(t.isStartAnchor?o=i+t.dimension<t.currentScroll:o=i>t.currentScroll+t.viewportSize,!e.isSticky&&!e.isTransforming&&o){let n=0;if(t.isStartAnchor){n=t.currentScroll-t.dimension;let a=t.constraintEnd-t.dimension;n>a&&(n=a);}else {n=t.currentScroll+t.viewportSize;let a=t.constraintStart;n<a&&(n=a);}let r=n-t.layoutStart-t.implicitShift;Math.abs(r- -t.implicitShift)<c.epsilon?(m(e),e.isTransforming=false):(t.isVertical?y(e,0,r):y(e,r,0),e.isTransforming=true);}if(e.isTransforming){let n=t.layoutStart+e.currentTranslation+t.implicitShift,l=false;if(t.isStartAnchor){let r=t.currentScroll+t.offset;n>=r-c.epsilon&&(l=true);}else {let r=t.currentScroll+t.viewportSize-t.offset;n+t.dimension<=r+c.epsilon&&(l=true);}l&&(h(e.element),e.isSticky=true,e.isTransforming=false);}},T=t=>{if(!t.cachedConfig.valid){(t.isSticky||t.isTransforming)&&(t.element.style.position="static",t.element.style.transform="",t.isSticky=false,t.isTransforming=false);return}let e=Y(t);if(t.lastScrollPos=e.currentScroll,j(e)){(t.isSticky||t.isTransforming)&&(m(t),t.isSticky=false,t.isTransforming=false);return}if(U(e)){(t.isSticky||t.isTransforming)&&(m(t),t.isSticky=false,t.isTransforming=false);return}let o=e.isStartAnchor?e.scrollDelta>0:e.scrollDelta<0,i=e.isStartAnchor?e.scrollDelta<0:e.scrollDelta>0;o?K(e,t):i&&Q(e,t);};var S=new Map,g=new Map,M=new WeakMap,D=t=>{let{element:e,parent:o,directParent:i}=t;t.cachedConfig=z(e),t.naturalRect=O(e,o),t.directParentRect=A(i,o),t.cachedViewportSize=V(o,t.cachedConfig.edge),t.cachedViewportPadding=P(o),t.isSticky?h(e):(m(t),t.isTransforming=false),T(t);},I=t=>{M.get(t)||(window.requestAnimationFrame(()=>{D(t),M.set(t,false);}),M.set(t,true));},X=t=>{let e=new Set(t.map(o=>o.target));for(let o of S.values())(e.has(o.element)||e.has(o.parent)||e.has(o.directParent))&&I(o);},F=()=>{for(let t of S.values())(t.parent===document.documentElement||t.parent===document.body)&&I(t);},p=new ResizeObserver(X),w=t=>{if(S.has(t))return;let e=E(t),o=t.parentElement||e,i=new MutationObserver(s=>{var f;for(let u of s)u.type==="attributes"&&u.attributeName==="class"&&(t.classList.contains(c.className)||(f=g.get(t))==null||f());});i.observe(t,{attributes:true,attributeFilter:["class"]});let n={element:t,parent:e,directParent:o,directParentRect:{top:0,left:0,width:0,height:0,bottom:0,right:0,x:0,y:0,toJSON:()=>{}},naturalRect:{top:0,left:0,height:0,width:0},lastScrollPos:0,isSticky:false,isTransforming:false,currentTranslation:0,cachedConfig:{valid:false,edge:"top",offset:0},cachedViewportSize:0,cachedViewportPadding:v,attributeObserver:i};t.setAttribute(c.attrName,"static"),S.set(t,n),D(n),p.observe(t),p.observe(e),o!==e&&p.observe(o);let l=false,r=()=>{l||(window.requestAnimationFrame(()=>{T(n),l=false;}),l=true);},a=e===document.documentElement?window:e;a.addEventListener("scroll",r,{passive:true}),g.set(t,()=>{a.removeEventListener("scroll",r),i.disconnect(),p.unobserve(t);let s=false,f=false;for(let[u,d]of S.entries())u!==t&&(d.parent===e&&(s=true),d.directParent===o&&(f=true));s||p.unobserve(e),!f&&o!==e&&p.unobserve(o),S.delete(t),g.delete(t);});},Z=t=>{let e=false;for(let{type:o,addedNodes:i,removedNodes:n}of t)o==="childList"&&(i.forEach(l=>{l instanceof HTMLElement&&(l.classList.contains(c.className)&&w(l),l.querySelectorAll(`.${c.className}`).forEach(r=>w(r)));}),e=e||!!n.length);e&&Array.from(g.keys()).forEach(o=>{var i;document.contains(o)||(i=g.get(o))==null||i();});},_=t=>{if(t.animationName==="sticky-polite-announce"){let e=t.target;g.has(e)||w(e);}},b=()=>{k(),document.addEventListener("animationstart",_),window.visualViewport?window.visualViewport.addEventListener("resize",F):window.addEventListener("resize",F),document.querySelectorAll(`.${c.className}`).forEach(t=>w(t)),new MutationObserver(Z).observe(document.body,{childList:true,subtree:true});};typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",b):b());var ut=b;module.exports=ut;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map